(()=>{"use strict";class e{constructor(e){this.name=e.name,this.due=e.due,this.desc=e.desc,this.priority=e.priority,this.id=e.id,this.completed=!1}}class t{constructor(e,t){this.name=e,this.tasks=[],this.id=t}add_task(e){this.tasks.push(e)}remove_task(e){this.tasks.splice(this.tasks.findIndex((t=>t.id==e)),1)}}let[o,n]=function(){let e=JSON.parse(localStorage.getItem("projs"));return null==e||0==e.length?[1,-1]:[e[e.length-1].id+1,+localStorage.getItem("task_id")]}();const l=[];let s=document.querySelector(".projects"),a=document.querySelector("#create-project button"),i=document.querySelector("#create-project input");function c(t){let o=document.createElement("div");o.classList.add("project"),o.id=t.id,s.append(o);let a=document.createElement("span");a.classList.add("title"),a.textContent=t.name;let i=document.createElement("ul");o.append(a,i,function(t){let o=document.createElement("div");o.classList.add("btn-container");let s=document.createElement("button");s.textContent="+ add task";let a=document.createElement("button");return a.textContent="- remove project",a.classList.add("red-button"),o.append(s,a),s.addEventListener("click",(s=>{let a=document.getElementById(t.id).querySelector("form");null==a?(a=document.createElement("form"),a.innerHTML='\n                <label for="task_name">Name: </label>\n                <input type="text" id="task_name" name="name" value="Ricky">\n                <label for="due">Due: </label>\n                <input type="date" id="due" name="due">\n                <label for="desc">Description: </label>\n                <textarea id="desc" cols="30" rows="10" name="desc"></textarea>\n                <label for="priority">Priority: </label>\n                <select id="priority" name="priority">\n                    <option>Low</option>\n                    <option selected>Medium</option>\n                    <option>High</option>\n                </select>\n                <button>Done</button>\n            ',a.addEventListener("submit",(o=>{o.preventDefault(),function(t,o){let s=document.getElementById(o.id),a=s.querySelector("ul");const i=s.querySelector("#task_name").value;let c=s.querySelector("#due").value;""==c&&(c="N/A");const d=s.querySelector("#desc").value,r=s.querySelector("#priority").value;let u=new e({name:i,due:c,desc:d,priority:r,id:n});o.add_task(u),n--,localStorage.setItem("task_id",String(n)),localStorage.setItem("projs",JSON.stringify(l)),console.log(`YOU JUST CREATED A TASK OF ID ${u.id} FOR PROJECT ${o.id}. WE ADDED TASK OBJECT TO ITS ARRAY`),console.log(localStorage),console.log("------------------------");let m=document.createElement("li");m.classList.add("task"),m.id=u.id,m.textContent=u.name,t.remove(),m.addEventListener("click",(e=>{const t=`[data-id="${m.id}"]`;let n=a.querySelector(t);if(null==n){n=document.createElement("div"),n.classList.add("task-clicked"),n.dataset.id=m.id;let e=document.createElement("div");e.style.cssText="display: flex; gap: 3px;";let t=document.createElement("button"),s=document.createElement("button");t.textContent="Mark finished",s.textContent="Delete task",s.classList.add("red-button");let a=document.createElement("span");a.textContent="Due: "+u.due;let i=document.createElement("span");i.textContent="Description: "+u.desc;let c=document.createElement("span");c.textContent="Priority: "+u.priority,t.addEventListener("click",(e=>{const n=[a,i,c];u.completed=!u.completed,localStorage.setItem("projs",JSON.stringify(l)),console.log(`YOU JUST SET TASK OF ID ${u.id} AS COMPLETE FOR PROJECT ${o.id}`),console.log(localStorage),console.log("------------------------");for(let e of n)e.classList.toggle("line-through");t.classList.toggle("red-button"),t.textContent="Mark finished"==t.textContent?"Mark unfinished":"Mark finished"})),s.addEventListener("click",(e=>{o.remove_task(u.id),m.remove(),n.remove(),localStorage.setItem("projs",JSON.stringify(l)),console.log(`YOU JUST DELETED TASK OF ID ${u.id} FOR PROJECT ${o.id}. WE DELETED TASK OBJECT FROM ITS ARRAY`),console.log(localStorage),console.log("------------------------")})),e.append(t,s),n.append(e,a,i,c),m.insertAdjacentElement("afterend",n)}else n.classList.toggle("hidden")})),a.append(m)}(a,t)})),o.append(a)):a.classList.toggle("hidden")})),a.addEventListener("click",(e=>{l.splice(l.findIndex((e=>e.id==t.id)),1),document.getElementById(t.id).remove(),localStorage.setItem("projs",JSON.stringify(l)),console.log("YOU JUST DELETED A PROJECT, SO UPDATED ARRAY"),console.log(localStorage),console.log("------------------------")})),o}(t))}a.addEventListener("click",(e=>{let s;s=""==i.value?new t("untitled project",o):new t(i.value,o),o++,l.push(s),localStorage.setItem("task_id",String(n)),localStorage.setItem("projs",JSON.stringify(l)),console.log(`YOU JUST CREATED A PROJECT THAT HAS ID OF ${s.id}`),console.log(localStorage),console.log("------------------------"),c(s)})),function(){let e=JSON.parse(localStorage.getItem("projs"));if(null!=e){console.log(`PREVIOUS PROJECTS: ${localStorage}`);for(let t of e)c(t)}else console.log("no previous projects")}()})();