(()=>{"use strict";class e{constructor(e){this.name=e.name,this.due=e.due,this.desc=e.desc,this.priority=e.priority,this.id=e.id,this.completed=!1}}class t{constructor(e,t){this.name=e,this.tasks=[],this.id=t}add_task(e){this.tasks.push(e)}remove_task(e){this.tasks.splice(this.tasks.findIndex((t=>t.id==e)),1)}}let n=1,d=-1;const o=[];let l=document.querySelector(".projects"),i=document.querySelector("#create-project button"),a=document.querySelector("#create-project input");i.addEventListener("click",(i=>{let s;s=""==a.value?new t("untitled project",n):new t(a.value,n),n++,o.push(s),function(t){let n=document.createElement("div");n.classList.add("project"),n.id=t.id,l.append(n);let i=document.createElement("span");i.classList.add("title"),i.textContent=t.name;let a=document.createElement("ul");n.append(i,a,function(t){let n=document.createElement("div");n.classList.add("btn-container");let l=document.createElement("button");l.textContent="+ add task";let i=document.createElement("button");return i.textContent="- remove project",i.classList.add("red-button"),n.append(l,i),l.addEventListener("click",(o=>{let l=document.getElementById(t.id).querySelector("form");null==l?(l=document.createElement("form"),l.innerHTML='\n                <label for="task_name">Name: </label>\n                <input type="text" id="task_name" name="name" value="Ricky">\n                <label for="due">Due: </label>\n                <input type="date" id="due" name="due">\n                <label for="desc">Description: </label>\n                <textarea id="desc" cols="30" rows="10" name="desc"></textarea>\n                <label for="priority">Priority: </label>\n                <select id="priority" name="priority">\n                    <option>Low</option>\n                    <option selected>Medium</option>\n                    <option>High</option>\n                </select>\n                <button>Done</button>\n            ',l.addEventListener("submit",(n=>{n.preventDefault(),function(t,n){let o=document.getElementById(n.id),l=o.querySelector("ul");const i=o.querySelector("#task_name").value,a=o.querySelector("#due").value,s=o.querySelector("#desc").value,c=o.querySelector("#priority").value;let r=new e({name:i,due:a,desc:s,priority:c,id:d});console.log(r),n.add_task(r),console.log(n);let u=document.createElement("li");u.classList.add("task"),u.id=d,d--,u.textContent=r.name,t.remove(),u.addEventListener("click",(e=>{const t=`[data-id="${u.id}"]`;let d=l.querySelector(t);if(null==d){d=document.createElement("div"),d.classList.add("task-clicked"),d.dataset.id=u.id;let e=document.createElement("div");e.style.cssText="display: flex; gap: 3px;";let t=document.createElement("button"),o=document.createElement("button");t.textContent="Mark finished",o.textContent="Delete task",o.classList.add("red-button");let l=document.createElement("span");l.textContent="Due: "+r.date;let i=document.createElement("span");i.textContent="Description: "+r.desc;let a=document.createElement("span");a.textContent="Priority: "+r.priority,t.addEventListener("click",(e=>{const d=[l,i,a];r.completed=!r.completed,console.log(r),console.log(n);for(let e of d)e.classList.toggle("line-through");t.classList.toggle("red-button"),t.textContent="Mark finished"==t.textContent?"Mark unfinished":"Mark finished"})),e.append(t,o),d.append(e,l,i,a),u.insertAdjacentElement("afterend",d)}else d.classList.toggle("hidden")})),l.append(u)}(l,t)})),n.append(l)):l.classList.toggle("hidden")})),i.addEventListener("click",(e=>{o.splice(o.findIndex((e=>e.id==t.id)),1),document.getElementById(t.id).remove()})),n}(t))}(s)}))})();